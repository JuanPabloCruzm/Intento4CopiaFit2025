<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Plan de Alimentación</title>
  <link rel="icon" href="favicon.ico" />
  <style>
    body {
      background-color: #121212;
      color: #eee;
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 700px;
      margin: auto;
    }
    h1, h2 {
      text-align: center;
    }
    .dia {
      background-color: #1f1f1f;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
    }
    .comida {
      margin: 5px 0;
    }
    button {
      display: block;
      margin: 30px auto;
      background-color: #1f1f1f;
      border: 2px solid #eee;
      color: #eee;
      padding: 12px 24px;
      font-size: 1.1em;
      border-radius: 10px;
      cursor: pointer;
    }
    button:hover {
      background-color: #333;
    }
  </style>
</head>
<body>

  <h1>Plan de Alimentación</h1>
  <h2 id="saludo"></h2>
  <div id="plan"></div>

  <button onclick="volverAlMenu()">Volver al Menú</button>

  <script>
    // Obtener datos desde localStorage
    const nombre = localStorage.getItem('nombre') || 'usuario';
    const imc = parseFloat(localStorage.getItem('imc'));
    const tipoCuerpo = localStorage.getItem('tipoCuerpo');
    const deporte = localStorage.getItem('deporte');
    const disciplina = localStorage.getItem('disciplina');
    const especialidad = localStorage.getItem('especialidad');

    // Clasificar IMC
    let clasificacion = '';
    if (imc < 18.5) clasificacion = 'bajo peso';
    else if (imc >= 18.5 && imc <= 24.9) clasificacion = 'peso normal';
    else clasificacion = 'sobrepeso';

    // Saludo personalizado
    document.getElementById('saludo').textContent = `Hola ${nombre}, aquí está tu plan de alimentación según tu IMC (${clasificacion}), tipo de cuerpo (${tipoCuerpo}) y deporte (${deporte}${disciplina ? ' - ' + disciplina : ''}${especialidad ? ' - ' + especialidad : ''}).`;

    // Planes ejemplo: 7 días con 3 comidas cada uno, para la demo (completa esto con más opciones)
    const planes = {
      mtb: {
        "bajo peso": [
          ["Desayuno MTB BP 1", "Almuerzo MTB BP 1", "Cena MTB BP 1"],
          ["Desayuno MTB BP 2", "Almuerzo MTB BP 2", "Cena MTB BP 2"],
          ["Desayuno MTB BP 3", "Almuerzo MTB BP 3", "Cena MTB BP 3"],
          ["Desayuno MTB BP 4", "Almuerzo MTB BP 4", "Cena MTB BP 4"],
          ["Desayuno MTB BP 5", "Almuerzo MTB BP 5", "Cena MTB BP 5"],
          ["Desayuno MTB BP 6", "Almuerzo MTB BP 6", "Cena MTB BP 6"],
          ["Desayuno MTB BP 7", "Almuerzo MTB BP 7", "Cena MTB BP 7"]
        ],
        "peso normal": [
          ["Desayuno MTB PN 1", "Almuerzo MTB PN 1", "Cena MTB PN 1"],
          ["Desayuno MTB PN 2", "Almuerzo MTB PN 2", "Cena MTB PN 2"],
          ["Desayuno MTB PN 3", "Almuerzo MTB PN 3", "Cena MTB PN 3"],
          ["Desayuno MTB PN 4", "Almuerzo MTB PN 4", "Cena MTB PN 4"],
          ["Desayuno MTB PN 5", "Almuerzo MTB PN 5", "Cena MTB PN 5"],
          ["Desayuno MTB PN 6", "Almuerzo MTB PN 6", "Cena MTB PN 6"],
          ["Desayuno MTB PN 7", "Almuerzo MTB PN 7", "Cena MTB PN 7"]
        ],
        "sobrepeso": [
          ["Desayuno MTB SP 1", "Almuerzo MTB SP 1", "Cena MTB SP 1"],
          ["Desayuno MTB SP 2", "Almuerzo MTB SP 2", "Cena MTB SP 2"],
          ["Desayuno MTB SP 3", "Almuerzo MTB SP 3", "Cena MTB SP 3"],
          ["Desayuno MTB SP 4", "Almuerzo MTB SP 4", "Cena MTB SP 4"],
          ["Desayuno MTB SP 5", "Almuerzo MTB SP 5", "Cena MTB SP 5"],
          ["Desayuno MTB SP 6", "Almuerzo MTB SP 6", "Cena MTB SP 6"],
          ["Desayuno MTB SP 7", "Almuerzo MTB SP 7", "Cena MTB SP 7"]
        ],
      },

      gimnasio: {
        "bajo peso": [ /* igual estructura con 7 comidas x 3 */ ],
        "peso normal": [ /* ... */ ],
        "sobrepeso": [ /* ... */ ]
      },

      yoga: {
        "bajo peso": [ /* ... */ ],
        "peso normal": [ /* ... */ ],
        "sobrepeso": [ /* ... */ ]
      },

      atletismo: {
        "bajo peso": [ /* ... */ ],
        "peso normal": [ /* ... */ ],
        "sobrepeso": [ /* ... */ ]
      },

      natacion: {
        "bajo peso": [ /* ... */ ],
        "peso normal": [ /* ... */ ],
        "sobrepeso": [ /* ... */ ]
      },

      rugby: {
        "bajo peso": [ /* ... */ ],
        "peso normal": [ /* ... */ ],
        "sobrepeso": [ /* ... */ ]
      },

      futbol: {
        "bajo peso": [ /* ... */ ],
        "peso normal": [ /* ... */ ],
        "sobrepeso": [ /* ... */ ]
      },

      sedentario: {
        "bajo peso": [ /* ... */ ],
        "peso normal": [ /* ... */ ],
        "sobrepeso": [ /* ... */ ]
      }
    };

    // Función para obtener plan correcto
    function obtenerPlan() {
      if (!planes[deporte]) return null;
      if (!planes[deporte][clasificacion]) return null;

      return planes[deporte][clasificacion];
    }

    const plan = obtenerPlan();
    const planDiv = document.getElementById('plan');

    if (plan) {
      for (let i = 0; i < plan.length; i++) {
        const dia = plan[i];
        const diaDiv = document.createElement('div');
        diaDiv.classList.add('dia');
        diaDiv.innerHTML = `
          <h3>Día ${i + 1}</h3>
          <p class="comida"><strong>Desayuno:</strong> ${dia[0]}</p>
          <p class="comida"><strong>Almuerzo:</strong> ${dia[1]}</p>
          <p class="comida"><strong>Cena:</strong> ${dia[2]}</p>
        `;
        planDiv.appendChild(diaDiv);
      }
    } else {
      planDiv.innerHTML = `<p>No hay un plan disponible para tu combinación actual.</p>`;
    }

    function volverAlMenu() {
      window.location.href = 'menu.html';
    }
  </script>

</body>
</html>
